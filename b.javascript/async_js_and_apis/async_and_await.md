# Async and Await
The `async/await` syntax in JavaScript is a way to work with asynchronous code in a more synchronous-looking fashion. It was introduced in ECMAScript 2017 (ES8) and has since become a widely used feature for handling asynchronous operations.

Here's a brief overview:

1. **`async` Function:**

    The async keyword is what lets the JavaScript engine know that you are declaring an asynchronous function. This is required to use await inside any function.

   - The `async` keyword is used to define a function that will return a promise. An `async` function always returns a promise, and if the function returns a value, the promise will be resolved with that value.

   ```javascript
   async function myAsyncFunction() {
     // Code here
     return result;
   }
   ```


  If an async function does not explicitly return a value or returns undefined, the function will still return a promise. The promise will be resolved with the value undefined. This is because the purpose of the async keyword is to indicate that the function contains asynchronous operations and should always return a promise.

  When a function is declared with async, it automatically returns a promise; returning in an async function is the same as resolving a promise. Likewise, throwing an error will reject the promise.

  The async keyword can also be used with any of the ways a function can be created. Said differently: it is valid to use an async function anywhere you can use a normal function. Below are some examples:

  ```js
  const yourAsyncFunction = async () => {
    // do something asynchronously and return a promise
    return result;
  }
  ```

  ```js
  anArray.forEach(async item => {
    // do something asynchronously for each item in 'anArray'
    // one could also use .map here to return an array of promises to use with 'Promise.all()'
  });
  ```

  ```js
  server.getPeople().then(async people => {
    people.forEach(person => {
      // do something asynchronously for each person
    });
  });
  ```

2. **`await` Operator:**

   - The `await` keyword is used inside an `async` function and is followed by a promise. The await keyword before a promise pauses the execution of the function until the promise is settled, and then, a- If it’s an error, an exception is generated — same as if throw error were called at that very place; b- Otherwise, it returns the result.

   ```javascript
   async function example() {
     let result = await somePromise;
     console.log(result);
   }
   ```

   Note that in the line `let result = await somePromise;`, `result` is not another promise. The await keyword is used to wait for the completion (fulfillment or rejection) of the `somePromise`. Once the promise is settled, the await expression evaluates to the resolved value of the promise. If somePromise resolves successfully, result will be assigned the resolved value of the promise. If somePromise is rejected, it will throw an exception.

   The `await` keyword can only be used inside an `async` function. It allows you to write asynchronous code that looks and behaves more like synchronous code.

   `await` does the following: it tells JavaScript to wait for an asynchronous action to finish before continuing the function. It’s like a ‘pause until done’ keyword. The await keyword is used to get a value from a function where you would normally use `.then()`. Instead of calling `.then()` after the asynchronous function, you would assign a variable to the result using `await`. Then you can use the result in your code as you would in your synchronous code.

3. **Handling Errors:**
   - You can use traditional `try...catch` blocks to handle errors in `async/await` functions.

   ```javascript
   async function example() {
     try {
       let result = await somePromise;
       console.log(result);
     } catch (error) {
       console.error(error);
     }
   }
   ```

   If we don’t have try..catch, then the promise generated by the call of the async function becomes rejected. We can append .catch to handle it:

   ```js
   async function f() {
    let response = await fetch('http://no-such-url');
   }

   // f() becomes a rejected promise
   f().catch(alert); // TypeError: failed to fetch // (*)
   ```

If we forget to add .catch there, then we get an unhandled promise error (viewable in the console). 

4. **Parallel Execution:**
   - You can use `Promise.all` with `async/await` to execute multiple asynchronous operations concurrently.

   ```javascript
   async function parallelExample() {
     const [result1, result2] = await Promise.all([promise1, promise2]);
     console.log(result1, result2);
   }
   ```

   When we need to wait for multiple promises, we can wrap them in `Promise.all` and then `await`. This can be more efficient than running the promises sequentially. In the case of an error, it propagates as usual, from the failed promise to Promise.all, and then becomes an exception that we can catch using try..catch around the call.

Remember that the `async/await` syntax is built on top of promises and is a syntactic sugar for working with asynchronous code. It provides a cleaner and more readable way to handle asynchronous operations compared to using callbacks or chaining `.then()` calls.

---
### Knowledge Check

**Q1.** How do you declare an async function?

**A1.** In order to declare an async function, we need to include the `async` keyword at the beginning of our function declaration:

```js
async function f() {
    // ...
   }
```

**Q2.** What does the async keyword do?

**A2.** When we use the async keyword, it lets the javascript engine know that the declared function is asyncronous and it will always return a Promise.

**Q3.** What does the await keyword do?

**A3.** The await keyword can only be used inside an async function. The await keyword is used to pause the execution of the async function, until the promise it "awaits" is resolved. We can store the returned value into a variable after the Promise resolution.

**Q4.** What is returned from an async function?

**A4.** An async function always returns a Promise object.

**Q5.** What happens when an error is thrown inside an async function?

**A5.** When an error is thrown inside an async function, the Promise that will be returned from the async function will resolve with the thrown error, and  the async function will return a rejected Promise.

**Q6.** How can you handle errors inside an async function?

**A6.** We can use the traditional "try...catch" syntax to handle errors inside an async function:

```js
async function example() {
     try {
       let result = await somePromise;
       console.log(result);
     } catch (error) {
       console.error(error);
     }
   }
```